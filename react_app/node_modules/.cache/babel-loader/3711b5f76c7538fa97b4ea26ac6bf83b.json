{"ast":null,"code":"var _jsxFileName = \"D:\\\\Neumont\\\\Quarter 8\\\\Service Based Software Architecture\\\\ECommerce\\\\react_app\\\\src\\\\Components\\\\Orders.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from \"react-router-dom\";\nimport Order from \"./Order\";\nimport axios from \"axios\";\nimport Spinner from \"./spinner\";\n\nclass Orders extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      orders: {},\n      filteredOrders: {},\n      isLoaded: false\n    };\n\n    this.filterOrders = e => {\n      let filter = e.target.value;\n      let filtered;\n\n      switch (filter) {\n        case 'all':\n          this.setState({\n            filteredOrders: this.state.orders\n          });\n          break;\n\n        case 'shipped':\n          filtered = this.state.orders.filter(order => order.shipped === true);\n          this.setState({\n            filteredOrders: filtered\n          });\n          break;\n\n        case 'not-shipped':\n          filtered = this.state.orders.filter(order => order.shipped === false);\n          this.setState({\n            filteredOrders: filtered\n          });\n          break;\n      }\n    };\n\n    this.setShipped = (id, carrier, trackNo, e) => {\n      e.preventDefault();\n      let url = `/zuul/order-service/${id}/${carrier}/${trackNo}`;\n      console.log(url);\n\n      if (localStorage.getItem('user') && carrier.length > 0) {\n        axios({\n          method: 'patch',\n          url: url,\n          headers: {\n            'Authorization': `Basic ${localStorage.getItem('credentials')}`\n          }\n        }).then(res => {\n          this.setState({\n            orders: this.state.orders.map(order => {\n              if (order.id === id) {\n                order = res.data;\n              }\n\n              return order;\n            })\n          });\n          this.setState({\n            filteredOrders: this.state.orders\n          });\n        }).catch(err => this.setState({\n          orders: undefined,\n          isLoaded: true\n        }));\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('user')) {\n      axios({\n        method: 'get',\n        url: `/zuul/order-service`,\n        headers: {\n          'Authorization': `Basic ${localStorage.getItem('credentials')}`\n        }\n      }).then(res => {\n        this.setState({\n          orders: res.data,\n          filteredOrders: res.data,\n          isLoaded: true\n        });\n        console.log(this.state.orders);\n      }).catch(err => this.setState({\n        items: undefined,\n        isLoaded: true\n      }));\n    }\n  }\n\n  render() {\n    if (localStorage.getItem('user')) {\n      if (this.state.isLoaded) {\n        let select = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-group mx-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          htmlFor: \"filter\",\n          className: \"mx-1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }\n        }, \"Filter\"), /*#__PURE__*/React.createElement(\"select\", {\n          name: \"filter\",\n          id: \"filter\",\n          onChange: this.filterOrders,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"option\", {\n          value: \"all\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }\n        }, \"All\"), /*#__PURE__*/React.createElement(\"option\", {\n          value: \"shipped\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }\n        }, \"Shipped\"), /*#__PURE__*/React.createElement(\"option\", {\n          value: \"not-shipped\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }\n        }, \"Not Shipped\")));\n        let orders = this.state.filteredOrders === undefined || this.state.filteredOrders.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"card mb-4 shadow-sm mx-3 py-4 d-flex justify-content-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"h1\", {\n          className: \"mx-auto\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 49\n          }\n        }, \"No orders.\"))) : /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row mx-1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }\n        }, this.state.filteredOrders.map(order => /*#__PURE__*/React.createElement(Order, {\n          key: order.id,\n          order: order,\n          setShipped: this.setShipped,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 33\n          }\n        }))));\n        return /*#__PURE__*/React.createElement(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }\n        }, select, orders);\n      } else {\n        return /*#__PURE__*/React.createElement(Spinner, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 24\n          }\n        });\n      }\n    } else {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 20\n        }\n      });\n    }\n  }\n\n}\n\nexport default Orders;","map":{"version":3,"sources":["D:/Neumont/Quarter 8/Service Based Software Architecture/ECommerce/react_app/src/Components/Orders.js"],"names":["React","Component","Redirect","Order","axios","Spinner","Orders","state","orders","filteredOrders","isLoaded","filterOrders","e","filter","target","value","filtered","setState","order","shipped","setShipped","id","carrier","trackNo","preventDefault","url","console","log","localStorage","getItem","length","method","headers","then","res","map","data","catch","err","undefined","componentDidMount","items","render","select"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport Order from \"./Order\";\r\nimport axios from \"axios\";\r\nimport Spinner from \"./spinner\";\r\n\r\nclass Orders extends Component {\r\n    state = {\r\n        orders: {},\r\n        filteredOrders: {},\r\n        isLoaded: false\r\n    }\r\n\r\n    filterOrders = (e) => {\r\n        let filter = e.target.value;\r\n        let filtered;\r\n\r\n        switch (filter) {\r\n            case 'all':\r\n                this.setState({filteredOrders: this.state.orders});\r\n                break;\r\n            case 'shipped':\r\n                filtered = this.state.orders.filter(order => order.shipped === true);\r\n                this.setState({filteredOrders: filtered});\r\n                break;\r\n            case 'not-shipped':\r\n                filtered = this.state.orders.filter(order => order.shipped === false);\r\n                this.setState({filteredOrders: filtered});\r\n                break;\r\n        }\r\n    }\r\n\r\n    setShipped = (id, carrier, trackNo, e) => {\r\n        e.preventDefault();\r\n\r\n        let url = `/zuul/order-service/${id}/${carrier}/${trackNo}`;\r\n        console.log(url)\r\n\r\n        if (localStorage.getItem('user') && carrier.length > 0) {\r\n            axios({\r\n                method: 'patch',\r\n                url: url,\r\n                headers: {\r\n                    'Authorization': `Basic ${localStorage.getItem('credentials')}`\r\n                }\r\n            }).then(res => {\r\n                this.setState({orders: this.state.orders.map(order => {\r\n                        if(order.id === id) {\r\n                            order = res.data;\r\n                        }\r\n                        return order;\r\n                    })})\r\n                this.setState({filteredOrders: this.state.orders});\r\n            }).catch(err => this.setState({orders: undefined, isLoaded: true}));\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (localStorage.getItem('user')) {\r\n            axios({\r\n                method: 'get',\r\n                url: `/zuul/order-service`,\r\n                headers: {\r\n                    'Authorization': `Basic ${localStorage.getItem('credentials')}`\r\n                }\r\n            }).then(res => {\r\n                this.setState({orders: res.data, filteredOrders: res.data, isLoaded: true})\r\n                console.log(this.state.orders)\r\n            }).catch(err => this.setState({items: undefined, isLoaded: true}));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (localStorage.getItem('user')) {\r\n            if (this.state.isLoaded) {\r\n                let select = (\r\n                    <div className=\"form-group mx-2\">\r\n                        <label htmlFor=\"filter\" className=\"mx-1\">Filter</label>\r\n                        <select name=\"filter\" id=\"filter\" onChange={this.filterOrders}>\r\n                            <option value=\"all\">All</option>\r\n                            <option value=\"shipped\">Shipped</option>\r\n                            <option value=\"not-shipped\">Not Shipped</option>\r\n                        </select>\r\n                    </div>\r\n                );\r\n                let orders = this.state.filteredOrders === undefined || this.state.filteredOrders.length === 0 ? (\r\n                    <div className=\"card mb-4 shadow-sm mx-3 py-4 d-flex justify-content-center\">\r\n                        <h1 className=\"mx-auto\"><strong>No orders.</strong></h1>\r\n                    </div>\r\n                ) : (\r\n                    <React.Fragment>\r\n                        <div className=\"row mx-1\">\r\n                            {this.state.filteredOrders.map(order => (\r\n                                <Order key={order.id} order={order} setShipped={this.setShipped}/>\r\n                            ))}\r\n                        </div>\r\n                    </React.Fragment>\r\n                );\r\n                return (\r\n                    <React.Fragment>\r\n                        {select}\r\n                        {orders}\r\n                    </React.Fragment>\r\n                );\r\n\r\n            } else {\r\n                return <Spinner/>\r\n            }\r\n        } else {\r\n            return <Redirect to=\"/login\"/>\r\n        }\r\n    }\r\n}\r\n\r\nexport default Orders;"]},"metadata":{},"sourceType":"module"}