{"ast":null,"code":"var _jsxFileName = \"D:\\\\Neumont\\\\Quarter 8\\\\Service Based Software Architecture\\\\ECommerce\\\\react_app\\\\src\\\\Components\\\\Cart.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport CartItem from \"./CartItem\";\nimport Spinner from './spinner';\nimport { Link } from \"react-router-dom\";\n\nclass Cart extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      items: {},\n      total: {},\n      isLoaded: false\n    };\n\n    this.removeItem = id => {\n      axios.delete(`http://localhost:3252/cart/removeItem/${id}/${localStorage.getItem('username')}`).then(res => {\n        this.setState({\n          items: [...this.state.items.filter(item => item.id !== id)]\n        });\n        let price = 0;\n        this.state.items.forEach(item => {\n          price += item.quantity * item.unitPrice;\n        });\n        this.setState({\n          total: price.toFixed(2)\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.changeQuantity = (event, id) => {\n      let quantity = event.target.value;\n      event.target.value = quantity;\n      axios.patch(`http://localhost:3252/cart/changeQuantity/${id}/${quantity}/${localStorage.getItem('username')}`).then(res => {\n        // eslint-disable-next-line array-callback-return\n        this.setState({\n          items: this.state.items.map(item => {\n            if (item.id === id) {\n              item.quantity = quantity;\n            }\n\n            return item;\n          })\n        });\n        let price = 0;\n        this.state.items.forEach(item => {\n          price += item.quantity * item.unitPrice;\n        });\n        this.setState({\n          total: price.toFixed(2)\n        });\n      }).catch(err => console.log(err));\n    };\n  }\n\n  componentDidMount() {\n    axios.get(`http://localhost:3252/cart/showCart/${localStorage.getItem('username')}`).then(res => {\n      this.setState({\n        items: res.data.items,\n        total: res.data.total,\n        isLoaded: true\n      });\n    }).catch(err => {\n      if (err instanceof Error) {\n        this.setState({\n          items: undefined,\n          isLoaded: true\n        });\n      }\n    });\n  }\n\n  render() {\n    const {\n      items,\n      total,\n      isLoaded\n    } = this.state;\n\n    if (!isLoaded) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 20\n        }\n      });\n    } else if (items === undefined || items.length === 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mb-4 shadow-sm mx-3 py-4 d-flex justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"mx-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 45\n        }\n      }, \"There are currently no items in your cart.\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(Link, {\n        to: `/`,\n        className: \"btn btn-dark float-left mx-auto btn-lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }\n      }, \"Go to store\"));\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row mx-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-8 row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }\n      }, items.map(item => /*#__PURE__*/React.createElement(CartItem, {\n        key: item.id,\n        item: item,\n        removeItem: this.removeItem,\n        changeQuantity: this.changeQuantity,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"col-md-10 float-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 33\n        }\n      }, \"Sub-total\"), /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 33\n        }\n      }, \"$\", total))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card col-2\",\n        style: {\n          height: '200px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }\n      }, \"Checkout\"))));\n    }\n  }\n\n}\n\nexport default Cart;","map":{"version":3,"sources":["D:/Neumont/Quarter 8/Service Based Software Architecture/ECommerce/react_app/src/Components/Cart.js"],"names":["React","Component","axios","CartItem","Spinner","Link","Cart","state","items","total","isLoaded","removeItem","id","delete","localStorage","getItem","then","res","setState","filter","item","price","forEach","quantity","unitPrice","toFixed","catch","err","console","log","changeQuantity","event","target","value","patch","map","componentDidMount","get","data","Error","undefined","render","length","height"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport CartItem from \"./CartItem\";\r\nimport Spinner from './spinner';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nclass Cart extends Component {\r\n    state = {\r\n        items: {},\r\n        total: {},\r\n        isLoaded: false\r\n    }\r\n\r\n    removeItem = (id) => {\r\n        axios.delete(`http://localhost:3252/cart/removeItem/${id}/${localStorage.getItem('username')}`).then(res => {\r\n            this.setState({items: [...this.state.items.filter(item => item.id !== id)]})\r\n            let price = 0;\r\n            this.state.items.forEach(item => {\r\n                price += item.quantity * item.unitPrice;\r\n            })\r\n            this.setState({total: price.toFixed(2)})\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    changeQuantity = (event, id) => {\r\n        let quantity = event.target.value;\r\n        event.target.value = quantity;\r\n        axios.patch(`http://localhost:3252/cart/changeQuantity/${id}/${quantity}/${localStorage.getItem('username')}`).then(res => {\r\n            // eslint-disable-next-line array-callback-return\r\n            this.setState({items: this.state.items.map(item => {\r\n                    if(item.id === id) {\r\n                        item.quantity = quantity;\r\n                    }\r\n                    return item;\r\n                })})\r\n            let price = 0;\r\n            this.state.items.forEach(item => {\r\n                price += item.quantity * item.unitPrice;\r\n            })\r\n            this.setState({total: price.toFixed(2)})\r\n        }).catch(err => console.log(err));\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(`http://localhost:3252/cart/showCart/${localStorage.getItem('username')}`)\r\n            .then(res => {\r\n                this.setState({items: res.data.items, total: res.data.total, isLoaded: true})\r\n            }).catch(err => {\r\n                if(err instanceof Error) {\r\n                    this.setState({items: undefined, isLoaded: true})\r\n                }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {items, total, isLoaded} = this.state;\r\n        if (!isLoaded) {\r\n            return <Spinner/>\r\n        } else if (items === undefined || items.length === 0) {\r\n            return (\r\n                <div className=\"card mb-4 shadow-sm mx-3 py-4 d-flex justify-content-center\">\r\n                    <h1 className=\"mx-auto\"><strong>There are currently no items in your cart.</strong></h1>\r\n                    <br />\r\n                    <Link to={`/`} className=\"btn btn-dark float-left mx-auto btn-lg\">\r\n                        Go to store\r\n                    </Link>\r\n                </div>\r\n            )\r\n        } else {\r\n            return (\r\n                <React.Fragment>\r\n                    <div className=\"row mx-1\">\r\n                        <div className=\"col-2\"></div>\r\n                        <div className=\"col-8 row\">\r\n                            {items.map(item => (\r\n                                <CartItem key={item.id} item={item} removeItem={this.removeItem} changeQuantity={this.changeQuantity}/>\r\n                            ))}\r\n                            <div className=\"row mt-3\">\r\n                                <h4 className=\"col-md-10 float-right\">Sub-total</h4>\r\n                                <h4 className=\"col-md-2\">${total}</h4>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"card col-2\" style={{height: '200px'}}>\r\n                            <p>Checkout</p>\r\n                        </div>\r\n                    </div>\r\n                </React.Fragment>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default Cart;"]},"metadata":{},"sourceType":"module"}