FROM node:alpine

WORKDIR /app

ENV REACT_APP_API_GATEWAY_HOST=api-gateway
ENV REACT_APP_SVC_REGISTRY_HOST=svc-registry
ENV REACT_APP_ITEM_SERVICE_HOST=item-service
ENV REACT_APP_ITEM_SERVICE_PORT=8080
ENV REACT_APP_CART_SERVICE_HOST=cart-service
ENV REACT_APP_CART_SERVICE_PORT=8080
ENV REACT_APP_CHECKOUT_SERVICE_HOST=checkout-service
ENV REACT_APP_CHECKOUT_SERVICE_PORT=8080

ENV PATH /app/node_modules/.bin:$PATH

COPY package*.json ./
RUN npm install
COPY . .

EXPOSE 3000
CMD ["npm", "start"]